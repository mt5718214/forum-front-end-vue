{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./src/views/UserEdit.vue?8f03","webpack:///src/views/UserEdit.vue","webpack:///./src/views/UserEdit.vue?9980","webpack:///./src/views/UserEdit.vue"],"names":["$","$trim","trim","forcedStringTrimMethod","target","proto","forced","this","PROPER_FUNCTION_NAME","PROPER","fails","whitespaces","non","module","exports","METHOD_NAME","name","render","_vm","_h","$createElement","_c","_self","staticClass","on","$event","stopPropagation","preventDefault","handleSubmit","apply","arguments","attrs","_v","directives","rawName","value","user","expression","domProps","composing","$set","image","_e","handleFileChange","isProcessing","staticRenderFns","data","computed","methods","files","length","imageURL","created","setUser","id","component"],"mappings":"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","file":"js/chunk-5ebe622c.13f42968.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","var PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-5\"},[_c('form',{on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.name),expression:\"user.name\"}],staticClass:\"form-control\",attrs:{\"id\":\"name\",\"type\":\"text\",\"name\":\"name\",\"placeholder\":\"Enter Name\",\"required\":\"\"},domProps:{\"value\":(_vm.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"image\"}},[_vm._v(\"Image\")]),(_vm.user.image)?_c('img',{staticClass:\"d-block img-thumbnail mb-3\",attrs:{\"src\":_vm.user.image,\"width\":\"200\",\"height\":\"200\"}}):_vm._e(),_c('input',{staticClass:\"form-control-file\",attrs:{\"id\":\"image\",\"type\":\"file\",\"name\":\"image\",\"accept\":\"image/*\"},on:{\"change\":_vm.handleFileChange}})]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing}},[_vm._v(\" Submit \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container py-5\">\n    <form @submit.stop.prevent=\"handleSubmit\">\n      <div class=\"form-group\">\n        <label for=\"name\">Name</label>\n        <input\n          v-model=\"user.name\"\n          id=\"name\"\n          type=\"text\"\n          name=\"name\"\n          class=\"form-control\"\n          placeholder=\"Enter Name\"\n          required\n        />\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"image\">Image</label>\n        <img\n          :src=\"user.image\"\n          v-if=\"user.image\"\n          class=\"d-block img-thumbnail mb-3\"\n          width=\"200\"\n          height=\"200\"\n        />\n        <input\n          @change=\"handleFileChange\"\n          id=\"image\"\n          type=\"file\"\n          name=\"image\"\n          accept=\"image/*\"\n          class=\"form-control-file\"\n        />\n      </div>\n\n      <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isProcessing\">\n        Submit\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport usersAPI from \"../api/users\";\nimport { mapState } from \"vuex\";\nimport { Toast } from \"../utils/helpers\";\n\nexport default {\n  name: \"UserEdit\",\n  data() {\n    return {\n      user: {\n        name: \"test\",\n        image: \"\",\n      },\n      isProcessing: false,\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\"]),\n  },\n  methods: {\n    async setUser(id) {\n      try {\n        if (this.currentUser.id !== id) {\n          this.$router.push({ name: \"not-found\" });\n        }\n\n        this.user = this.currentUser;\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得使用者資料, 請稍後再試\",\n        });\n      }\n    },\n    handleFileChange(e) {\n      const { files } = e.target;\n      if (files.length === 0) {\n        this.user.image = \"\";\n      } else {\n        const imageURL = window.URL.createObjectURL(files[0]);\n        this.user.image = imageURL;\n      }\n    },\n    async handleSubmit(e) {\n      try {\n        if (!this.user.name.trim()) {\n          Toast.fire({\n            icon: \"warning\",\n            title: \"名稱不可為空\",\n          });\n          return;\n        }\n\n        this.isProcessing = true;\n        const form = e.target;\n        const formData = new FormData(form);\n        const { data } = await usersAPI.update({\n          userId: this.currentUser.id,\n          formData,\n        });\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n        this.$router.push({ name: \"user\" });\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法更新使用者資料, 請稍後再試\",\n        });\n        this.$router.push({ name: \"user\" });\n      }\n    },\n  },\n  created() {\n    const { id } = this.$route.params;\n    this.setUser(id);\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserEdit.vue?vue&type=template&id=6c75f332&\"\nimport script from \"./UserEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./UserEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}